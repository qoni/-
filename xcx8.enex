<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export3.dtd">
<en-export export-date="20180427T142523Z" application="Evernote" version="Evernote Mac 7.1 (456448)">
<note><title>8：轮播图改造</title><content><![CDATA[<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note><div><font style="font-size: 36px;">由于轮播图为一个组件，在新闻列表页和电影列表页都调用此组件，</font></div><div><span style="font-size: 36px;">当点击图片进入详情时，当时是在组件里添加的跳转详情页的事件</span></div><div><span style="font-size: 36px;">改造如下：</span></div><div><span style="font-size: 36px;">分别在新<span style="font-size: 36px;">闻列表页和电影列表页定义事件，在组件triggerEvent中接收回调。</span></span></div><div><span style="font-size: 36px;"><span style="font-size: 36px;"><br /></span></span></div><div><span style="font-size: 36px;"><span style="font-size: 36px;"><font color="#ff2600">swiper组件</font></span></span></div><div><font style="font-size: 24px;">swiper.js</font></div><div><div><span style="color: rgb(0, 0, 0);"><font style="font-size: 24px;">_toPar(e){</font></span></div><div><span style="color: rgb(0, 0, 0);"><font style="font-size: 24px;"><span>    //第二个参数是把当前点击的数据传递出去</span><br /></font></span></div><div><font style="font-size: 24px;"><span style="color: rgb(0, 0, 255);"><span>    </span>this</span><span style="color: rgb(0, 0, 0);">.triggerEvent(</span><span style="color: rgb(163, 21, 21);">"toPagePar"</span><span style="color: rgb(0, 0, 0);">,e.currentTarget.dataset);</span></font></div><div><span style="color: rgb(0, 0, 0);"><font style="font-size: 24px;">},</font></span></div></div><div><span style="color: rgb(0, 0, 0);"><font style="font-size: 24px;">swiper.wxml</font></span></div><div><div><span style="color: #0000ff; font-size: 24px;">&lt;</span><span style="color: #800000; font-size: 24px;">swiper-item</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">wx:for</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'{{swiperList}}'</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">wx:key</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'index'</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">bindtap</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'_toPar'</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">data-nid</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'{{item.id}}'</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">data-ave</span><span style="color: #000000; font-size: 24px;">=</span><font color="#0000ff"><span style="font-size: 24px;">'{{item.rating.average}}</span><span style="caret-color: rgb(0, 0, 255); font-size: 24px;">’</span><span style="font-size: 24px;">&gt;…...&lt;/swiper-item&gt;</span></font></div></div><div><font color="#0000ff"><span style="font-size: 24px;"><br /></span></font></div><div><font style="font-size: 36px;" color="#ff2600"><span style="caret-color: rgb(0, 0, 255);">movies列表页</span></font></div><div><font color="#0000ff"><span style="caret-color: rgb(0, 0, 255); font-size: 24px;">movies.js</span></font></div><div><div><span style="color: #000000; font-size: 24px;">toParMovie(e) {</span></div><div><span style="color: #000000; font-size: 24px;"><span>    </span>console.log(e);</span></div><div><span style="color: #000000; font-size: 24px;"><span>    //swiper.js中通过triggerEvent携带的数据通过e.detail接收</span><br /></span></div><div><span style="color: #0000ff; font-size: 24px;"><span>    </span>var</span><span style="font-size: 24px; color: rgb(0, 0, 255);"> </span><span style="color: #000000; font-size: 24px;">nid = e.detail.nid;</span><span style="font-size: 24px; color: rgb(0, 0, 255);">
</span></div><div><span style="color: #0000ff; font-size: 24px;"><span>    </span>var</span><span style="font-size: 24px; color: rgb(0, 0, 255);"> </span><span style="color: #000000; font-size: 24px;">ave = e.detail.ave;</span><span style="font-size: 24px; color: rgb(0, 0, 255);">
</span></div><div><span style="color: #000000; font-size: 24px;"><span>    </span>console.log(nid,ave);</span></div><div><span style="color: #000000; font-size: 24px;"><span>    </span>wx.navigateTo({</span></div><div><span style="color: #000000; font-size: 24px;"><span>    <span>    </span></span>url:</span><span style="font-size: 24px; color: rgb(0, 0, 255);"> </span><span style="color: #a31515; font-size: 24px;">'/pages/movies/moviesDetail/moviesDetail?id='</span><span style="font-size: 24px; color: rgb(0, 0, 255);"> </span><span style="color: #000000; font-size: 24px;">+ nid +</span><span style="font-size: 24px; color: rgb(0, 0, 255);"> </span><span style="color: #a31515; font-size: 24px;">"&amp;ave="</span><span style="font-size: 24px; color: rgb(0, 0, 255);"> </span><span style="color: #000000; font-size: 24px;">+ ave</span><span style="font-size: 24px; color: rgb(0, 0, 255);">
</span></div><div><span style="color: #000000; font-size: 24px;"><span>    </span>})</span></div><div><span style="color: #000000; font-size: 24px;">},</span></div></div><div><span style="font-size: 24px;">movies.wxml</span></div><div><span style="font-size: 24px;">//bindtoPagePar接收事件回调</span></div><div><div><span style="color: #0000ff; font-size: 24px;">&lt;</span><span style="color: #800000; font-size: 24px;">swiper</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">id</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'swiper'</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">bindtoPagePar</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'toParMovie'</span><span style="font-size: 24px;"> </span><span style="color: #ff0000; font-size: 24px;">swiperList</span><span style="color: #000000; font-size: 24px;">=</span><span style="color: #0000ff; font-size: 24px;">'{{nowPlayList.swiperCls}}'&gt;&lt;/</span><span style="color: #800000; font-size: 24px;">swiper</span><span style="color: #0000ff; font-size: 24px;">&gt;</span><span style="font-size: 24px;">
</span></div></div><div><span style="color: #0000ff; font-size: 24px;"><br /></span></div><div><span style="color: #0000ff; font-size: 24px;">news新闻页同上</span></div><div><br /></div></en-note>]]></content><created>20180427T031719Z</created><updated>20180427T032613Z</updated><note-attributes><latitude>39.68774592205757</latitude><longitude>116.0634261126957</longitude><altitude>49.98712921142578</altitude><author>妮子</author><source>desktop.mac</source><reminder-order>0</reminder-order></note-attributes></note>
</en-export>
